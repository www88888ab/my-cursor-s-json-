# MSYS2 中文支持配置说明

## ✅ 已完成的配置

1. **修复了 .bashrc 编码问题**（移除了 BOM 标记）
2. **添加了中文环境变量**到 .bashrc
3. **配置了 Cursor 终端编码**为 UTF-8

## 🔧 配置内容

### 环境变量配置

已在 `.bashrc` 中添加：
```bash
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
export LC_CTYPE=zh_CN.UTF-8
```

### Cursor 终端配置

已在 `.vscode/settings.json` 中配置：
- 字体：支持中文的字体（Microsoft YaHei Mono）
- 编码：UTF-8

## 🚀 使配置生效

### 方法一：重新加载配置（推荐）

在 MSYS2 终端中运行：
```bash
source ~/.bashrc
```

### 方法二：重新打开终端

1. 关闭当前终端
2. 在 Cursor 中按 `Ctrl + ` ` 打开新终端
3. 新终端会自动加载配置

### 方法三：手动设置当前会话

在终端中运行：
```bash
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
export LC_CTYPE=zh_CN.UTF-8
```

## 🎯 验证中文支持

配置生效后，可以测试：

```bash
# 1. 检查 locale 设置
locale

# 2. 测试中文显示
echo "测试中文：你好世界"

# 3. 查看中文文件名
ls -la
```

## 🔍 如果仍然显示乱码

### 1. 检查终端字体

在 Cursor 中：
- 打开设置：`File` → `Preferences` → `Settings`
- 搜索：`terminal.integrated.fontFamily`
- 确保使用支持中文的字体，如：
  - `Microsoft YaHei Mono`
  - `SimSun`
  - `NSimSun`
  - `Consolas`（部分支持）

### 2. 检查文件编码

确保文件以 UTF-8 编码保存：
```bash
# 检查文件编码
file -i 文件名
```

### 3. 手动设置环境变量

如果自动配置不生效，手动设置：
```bash
# 在终端中运行
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
export LC_CTYPE=zh_CN.UTF-8

# 验证
locale
```

### 4. 配置 zsh（如果使用 zsh）

如果使用 zsh，也需要在 `.zshrc` 中添加：
```bash
# 编辑 .zshrc
nano ~/.zshrc

# 添加以下内容
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
export LC_CTYPE=zh_CN.UTF-8

# 保存后重新加载
source ~/.zshrc
```

## 📝 常见问题

### Q: 为什么还是显示乱码？

A: 可能的原因：
1. 终端字体不支持中文
2. 文件编码不是 UTF-8
3. 环境变量未正确加载

解决方法：
- 更换支持中文的字体
- 确保文件以 UTF-8 编码保存
- 重新加载配置文件

### Q: 如何更换终端字体？

A: 在 Cursor 设置中：
1. 打开设置（`Ctrl + ,`）
2. 搜索 `terminal.integrated.fontFamily`
3. 修改为支持中文的字体

### Q: Windows 路径中的中文显示正常吗？

A: MSYS2 会自动处理路径转换，中文路径应该可以正常显示。

## ✅ 完成检查清单

- [x] 修复 .bashrc 编码问题
- [x] 添加中文环境变量
- [x] 配置 Cursor 终端编码
- [ ] 重新加载配置（运行 `source ~/.bashrc`）
- [ ] 验证中文显示正常

## 🎉 总结

配置完成后，**重新打开终端或运行 `source ~/.bashrc`** 即可使中文支持生效。如果仍有问题，请检查终端字体设置。
